<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en" ng-app="addApp">
<head>
<style>
[ng\:cloak], [ng-cloak], .ng-cloak {
  display: none !important;
}
#vimeo_1, #matterport_2, #calculator {
display: none;
}
#vimeo_1_label, #matterport_2_label, #calculator_label {
cursor: pointer;
}
 .video, .matterport, .calculator1 {
display:none;
}
#vimeo_1:checked  ~  .video {display: block}
#matterport_2:checked ~ .matterport  {display: block}
#calculator:checked ~ .calculator1  {display: block}
div {
/* border: 1px solid black; */
} 	  
.calculator1 {
width: 300px;
background:#ECF1EF;
padding:5px;
border: 1px solid gray; 	
}
.T {
width: 290px;
margin:5px;
}
.T input {
box-sizing: border-box;
width:100%;
padding:10px;
text-align:right;
} 
.M {
width: 100%;
margin:5px; 
}
.M input {
width: 55px;
height:45px;
margin: 0;
padding:0;
}

.calculator1 :last-child :first-child {
width: 115px;
height:45px;
margin: 0;
padding:0;
} 	  		  		  	
</style>


    </head>
<body class="container">

    <header>
           </header>

    <main>
        <div>
 <input id="vimeo_1" type="radio" name="tab" checked="checked" /> 	  				 	 	 	    		  	   		  		
 <label for="vimeo_1" id="vimeo_1_label">Vimeo</label> 	  		
 <input id="matterport_2" type="radio" name="tab" /> 	  				 	 	 	    		  	   		  		
<label for="matterport_2" id="matterport_2_label">Matterport</label>
 <input id="calculator" type="radio" name="tab" /> 	  				 	 	 	    		  	   		  		
 <label for="calculator" id="calculator_label">Calculator</label> 
 
 <form action="video" method="post" class="video" ng-submit="submit($event)" ng-controller="addController">		 	 	 	    		  	   		  		
 <div>
  <br>Vimeo ID:<br>
  <input type="text" name="vimeoID" ng-change="myChange()" ng-model="vimeoID">
  <input type="button" class="addButton" value="Add" ng-click="addItem()">
  <span style="color:red" ng-show="messageForm" ng-cloak>Please input at least one video before</span>
  <div id="container"></div>
</div>
  <input type="submit" value="Video">
</form>
 
<form  action="matterport" method="post" class="matterport"> 	  				 	 	 	    		  	   		  		
<div>
  Matterport 360 ID:<br>
  <input type="text" name="matterport360ID"><br>
  <input type="submit" value="360 view"> 
</div>
</form>

<div class="calculator1"> 
<div class="T">
<input type="text">
</div>
<div class="M">
<input type="button" value="&#10229">
<input type="button" value="off">
<input type="button" value="C">
<input type="button" value="&#177">
<input type="button" value="&#8730">
</div>
<div class="M">
<input type="button" value="7">
<input type="button" value="8">
<input type="button" value="9">
<input type="button" value="/">
<input type="button" value="%">
</div>
<div class="M">
<input type="button" value="4">
<input type="button" value="5">
<input type="button" value="6">
<input type="button" value="*">
<input type="button" value="1/x">
</div>
<div class="M">
<input type="button" value="1">
<input type="button" value="2">
<input type="button" value="3">
<input type="button" value="-">
<input type="button" value="π">
</div>
<div class="M">
<input type="button" value="0">
<input type="button" value=".">
<input type="button" value="+">
<input type="button" value="=">
</div>
</div>
    </main>

    <footer>
           </footer>

<script>
var register = [];
var initial = true;
var scr = document.querySelectorAll(".T input[type=text]"); 
//global variables 
//main functions of calculator
var calculator = {
              "C" : function (reg1) {
                    register = [];
                    return 0;
              },
			  
              "off" : function (reg1) {
                      register = [];
                      return '';
              }, 
			  
              "\u27f5" : function (reg1) {
                         reg1=String (reg1);
                         reg1 = reg1.slice(0, -1);
                         return reg1;
              },
			  
              "\u221A" : function (reg1) {
                         return Math.sqrt(reg1);
              },
			  
              "1/x" : function (reg1) {
                      return 1 / reg1;
              },

              "π" : function (reg1) {
                    return Math.PI;
              }, 
 	
              "\xB1" : function (reg1) {
                       return scr[0].value = reg1 * -1;
              }, 
			  
              "/" : function (reg1, reg2) {
                    return reg2 / reg1;
              },
			  
              "*" : function (reg1, reg2) {
                    return reg1 * reg2;
              },
			  
              "-" : function (reg1, reg2) {
                    return reg2 - reg1; 
              },
			  
              "+" : function (reg1, reg2) {
                    return reg1 + reg2; 
              },

};

//calculator keys  			 	
function buttonValue () {
         var val = this.value; 
         switch (val) {
                 case '1':
                 case '2':
                 case '3':
                 case '4':
                 case '5':
                 case '6':
                 case '7':
                 case '8':
                 case '9':
                 case '0': 
                         if (initial || scr[0].value == "0") {
                             initial = false;
                             scr[0].value = val;
                             } else {
                                    scr[0].value = scr[0].value + val;
                         }
                         break;

                 case '.':
                          if (scr[0].value.indexOf(".")==-1 && initial == false) {
                              scr[0].value = scr[0].value + val;
                          }
                          if (scr[0].value.indexOf(".")==-1 && initial == true) {
                              scr[0].value = '0' + val;
                          }
                          initial = false;  
                          break;

                 case '+':
                 case '-':
                 case '*':
                 case '/':
                 case "=":
                 case "%":
                          if (initial) {
			      register[register.length-1]=val;
                              register[register.length-2]=scr[0].value;
			  } else {
	                         register.push(String(scr[0].value), val);
	                  }
                          initial=true;
	                  var op1 = Number (register[register.length-2]);
                          var operator = register[register.length-3];
                          var op2 = Number (register[register.length-4]);

                          if (operator == undefined) {
                              break;
                              }
                          if (val == "%") {
                              op1 = op1 * (op2 / 100)
                          }

                          op1 = calculator [operator](op1, op2);
                          register[register.length-2] = op1;
                          scr[0].value = op1;

                          if (val == "=" || val == "%") {                          
                          register = [];
                          }
                          break;
                 case "\u221A":
                 case "1/x":
                 case "π":
                 case "\xB1":
                 case "C":
                 case "off":
                 case "\u27f5":
                              scr[0].value = calculator [val](scr[0].value);
                              (val=="C"||val=="off")?initial=true:initial = false;
                 
				
         } 	
}
var buttons = document.querySelectorAll(".M input[type=button]");
for (var i=0;i<buttons.length;i++) {
     buttons[i].addEventListener('click',buttonValue,false);
} 
	   
</script>
		   
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script>
var addApp = angular.module("addApp", []);
    addApp.controller("addController", function ($scope, $compile) {
    $scope.addItem = function () {
           if ($scope.vimeoID != undefined) {
               var htmlCode = '<div class="videoItem"><br>Vimeo ID:<br><input type="text" name="vimeoID" value="'+$scope.vimeoID+'" required><input type="button" ng-click="removeItem($event)" style="color:red" class="removeButton" value="&#x2718"></div>';
               var item = $compile(htmlCode)($scope);
               $scope.vimeoID = undefined;
               var videoContainer = angular.element(document.querySelector("#container"));
               var newDiv = angular.element(item);
               videoContainer.append(newDiv);
           } else {
                   $scope.messageForm = true;
                  }
    }
    $scope.removeItem = function ($event) {
           angular.element($event.currentTarget).parent().remove();
    }
    $scope.submit = function($event) {
           var videoContainer = angular.element(document.querySelector("#container"));
           if ((!(videoContainer.children().length)) && (!$scope.vimeoID)) {
              $scope.messageForm = true;
              $event.preventDefault();
          }
    }
    $scope.myChange = function() {
           $scope.messageForm = false;
    }
});
</script>

</body>
</html> 
