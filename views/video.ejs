<!-- views/pages/video.ejs -->

<!DOCTYPE html>
<html lang="en" ng-app="videoApp">
<head>

    </head>
<body class="container">

    <header>
           </header>

    <main ng-controller="videoController">
        <div>
        <div>
<input type="button" value="Back" onclick="history.back()">
        </div>
<div ng-repeat="url in urls"> 
<iframe ng-src="{{url}}"width="640" height="280" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
<div> 
        </div>
    
             
    </main>

    <footer>
           </footer>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script>
var videoApp = angular.module("videoApp", []);
    videoApp.controller("videoController", function ($scope, $sce) {
    var vimeoStr = "<%= vids %>";
    vimeoIDs = vimeoStr.split(',');
    $scope.videos = vimeoIDs;
    $scope.urls = $scope.videos.filter(video=>video!='').map(function(video) {
                  return $sce.trustAsResourceUrl("https://player.vimeo.com/video/"+video);
                  });
});
</script>

</body>
</html>

